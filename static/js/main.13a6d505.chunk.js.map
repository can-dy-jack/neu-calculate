{"version":3,"sources":["component/Alert.module.css","component/CalculatorButton.js","component/CalculatorInner.js","component/Alert.js","App.js","index.js"],"names":["module","exports","alert","alertContent","CalculatorButton","_ref","val","func","className","disabled","calBtn","useRef","useEffect","circle","current","onmousedown","e","document","createElement","classList","add","style","left","clientX","offsetLeft","top","clientY","offsetTop","transform","appendChild","onmouseup","removeChild","oncontextmenu","preventDefault","react_default","a","Fragment","type","onClick","ref","CalculatorInner","stage","result","input_num","clear","funcs","window","onkeydown","code","console","log","shiftKey","percent","indexOf","length","cent2","sub","nega","multi","division","equal","clearOne","point","component_CalculatorButton","square","Alert","props","styles","color","marginRight","fill","width","height","strokeWidth","viewBox","xmlns","d","stroke","strokeLinecap","strokeLinejoin","info","Calculator","_useState","useState","_useState2","Object","slicedToArray","currOperator","setOperator","_useState3","_useState4","isCalculated","setIC","_useState5","_useState6","setLeft","_useState7","_useState8","right","setRight","_useState9","_useState10","setStage","_useState11","_useState12","alertStyle","setAlertStyles","alertBox","showAlert","i","c","children","setTimeout","normalOperation","text","undefined","id","component_Alert","component_CalculatorInner","num","parseFloat","res","parseInt","substring","slice","ReactDOM","createRoot","getElementById","render","StrictMode","src_App"],"mappings":"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","file":"static/js/main.13a6d505.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"Alert_alert__1fElv\",\"alertContent\":\"Alert_alertContent__YZpa4\"};","import React, { useRef, useEffect } from \"react\";\r\nimport \"./calculatorButton.css\";\r\n\r\nfunction CalculatorButton({ val, func, className, disabled }) {\r\n  const calBtn = useRef();\r\n\r\n  useEffect(() => {\r\n    let circle;\r\n    calBtn.current.onmousedown = (e) => {\r\n      circle = document.createElement(\"span\");\r\n      circle.classList.add(\"cal-box-circle\");\r\n      circle.style.left = e.clientX - calBtn.current.offsetLeft + \"px\";\r\n      circle.style.top = e.clientY - calBtn.current.offsetTop + \"px\";\r\n      circle.style.transform = \"translate(-50%, -50%)\";\r\n      calBtn.current.appendChild(circle);\r\n    };\r\n    calBtn.current.onmouseup = () => {\r\n      if(circle) {\r\n        calBtn.current.removeChild(circle);\r\n      }\r\n    };\r\n    // TODO\r\n    calBtn.current.oncontextmenu = (e) => {\r\n      e.preventDefault();\r\n    }\r\n  });\r\n  return (\r\n    <>\r\n      <button\r\n        type=\"button\"\r\n        className={className ? \"ccl-btn \" + className : \"ccl-btn\"}\r\n        onClick={func}\r\n        ref={calBtn}\r\n        disabled={disabled}\r\n      >\r\n        {val}\r\n      </button>\r\n    </>\r\n    \r\n  );\r\n}\r\nexport default CalculatorButton;\r\n","import React, { useEffect } from \"react\";\r\nimport CalculatorButton from \"./CalculatorButton\";\r\n\r\nfunction CalculatorInner({ stage, result, input_num, clear, funcs }) {\r\n  useEffect(() => {\r\n    // 监听键盘\r\n    window.onkeydown = (e) => {\r\n      const type = e.code;\r\n      console.log(type, e.shiftKey)\r\n      if (e.shiftKey && type === \"Digit5\") {\r\n        // shift + 5 => %\r\n        funcs.percent();\r\n        return;\r\n      }\r\n      if (type === \"Period\" || type === \"NumpadDecimal\") {\r\n        // .\r\n        funcs.point();\r\n        return;\r\n      }\r\n      if (type.indexOf(\"Digit\") > -1 || type.indexOf(\"Numpad\") > -1) {\r\n        // 0-9\r\n        input_num(+type[type.length - 1]);\r\n        return;\r\n      }\r\n      switch(type) {\r\n        case \"Slash\": funcs.cent2(); break; //  1/x\r\n        case \"NumpadAdd\": funcs.add(); break; //  +\r\n        case \"NumpadSubtract\": funcs.sub(); break; //  -\r\n        case \"Minus\": funcs.nega(); break; //  - 负\r\n        case \"NumpadMultiply\": funcs.multi(); break; //  x\r\n        case \"NumpadDivide\": funcs.division(); break; //  /\r\n        case \"Equal\": funcs.equal(); break; //  =\r\n        case \"Backspace\": funcs.clearOne(); break; //  Backspace\r\n        case \"Delete\": clear(); break; // Delete\r\n        default: return;\r\n      }\r\n    };\r\n  });\r\n \r\n  return (\r\n    <div className=\"calculator-grid-box\">\r\n      <div className=\"stage\">{stage}</div>\r\n      <div className=\"show\">\r\n        <span>{result}</span>\r\n      </div>\r\n \r\n      <CalculatorButton val=\"±\" className=\"nega\" func={funcs.nega} />\r\n      <CalculatorButton val=\"\" disabled={true} />\r\n      <CalculatorButton func={clear} val=\"AC\" className=\"ac\" />\r\n      <CalculatorButton val=\"BackSpace\" className=\"clear-one\" func={funcs.clearOne} />\r\n\r\n      <CalculatorButton val=\"&#8543;\" className=\"cent2\" func={funcs.cent2} />\r\n      <CalculatorButton val={<span>x<small><sup>2</sup></small></span>} className=\"square\" func={funcs.square}/>\r\n      <CalculatorButton val=\"%\" className=\"percent\" func={funcs.percent} />\r\n      <CalculatorButton val=\"÷\" className=\"division\" func={funcs.division} />\r\n\r\n      <CalculatorButton func={() => input_num(7)} val=\"7\" />\r\n      <CalculatorButton func={() => input_num(8)} val=\"8\" />\r\n      <CalculatorButton func={() => input_num(9)} val=\"9\" />\r\n      <CalculatorButton className=\"multi\" val=\"x\" func={funcs.multi} />\r\n\r\n      <CalculatorButton func={() => input_num(4)} val=\"4\" />\r\n      <CalculatorButton func={() => input_num(5)} val=\"5\" />\r\n      <CalculatorButton func={() => input_num(6)} val=\"6\" />\r\n      <CalculatorButton className=\"sub\" val=\"-\" func={funcs.sub} />\r\n\r\n      <CalculatorButton func={() => input_num(1)} val=\"1\" />\r\n      <CalculatorButton func={() => input_num(2)} val=\"2\" />\r\n      <CalculatorButton func={() => input_num(3)} val=\"3\" />\r\n      <CalculatorButton className=\"add\" val=\"+\" func={funcs.add} />\r\n\r\n      <CalculatorButton className=\"zero\" val=\"0\" func={() => input_num(0)} />\r\n      <CalculatorButton val=\".\" func={funcs.point} />\r\n      <CalculatorButton val=\"=\" className=\"equal\" func={funcs.equal} />\r\n    </div>\r\n  );\r\n}\r\nexport default CalculatorInner;","import React from \"react\";\r\nimport styles from \"./Alert.module.css\";\r\n\r\nfunction Alert(props) { // color info\r\n    return (\r\n        <aside className={styles.alert}>\r\n            <div className={styles.alertContent} style={{\r\n                color: props.color\r\n            }}>\r\n                <svg style={{\r\n                    marginRight: \"5px\"\r\n                }}\r\n                fill=\"none\" width=\"22px\" height=\"22px\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M12 7v6M12 17.01l.01-.011M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z\" stroke={props.color} strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"></path>\r\n                </svg>\r\n                { props.info }\r\n                </div>\r\n        </aside>\r\n    )\r\n}\r\n\r\nexport default Alert;","import React, { useState, useRef } from \"react\";\r\nimport CalculatorInner from \"./component/CalculatorInner\";\r\nimport Alert from \"./component/Alert\";\r\nimport \"./App.css\";\r\n\r\nfunction Calculator() {\r\n  const [currOperator, setOperator] = useState(\"\");\r\n  const [isCalculated, setIC] = useState(false);\r\n  const [left, setLeft] = useState(\"0\");\r\n  const [right, setRight] = useState(\"0\");\r\n  const [stage, setStage] = useState(\"\");\r\n\r\n  const [alertStyle, setAlertStyles] = useState([\r\n    \"出现错误\",\r\n    \"rgb(250, 13, 35)\",\r\n    // 用于防抖！\r\n    false,\r\n  ]);\r\n  const alertBox = useRef();\r\n  function showAlert(i, c) {\r\n    if (alertStyle[2]) {\r\n      return;\r\n    }\r\n    alertBox.current.children[0].style.transform = \"translateY(0)\";\r\n    setAlertStyles([i, c, true]);\r\n    setTimeout(() => {\r\n      alertBox.current.children[0].style.transform = \"translateY(-100%)\";\r\n      setAlertStyles([i, c, false]);\r\n    }, 3000);\r\n  }\r\n\r\n  const input_num = (num) => {\r\n    if (typeof num !== \"number\") {\r\n      showAlert(\"请给数字！(来自 input_num 函数)\", \"#22ef12\");\r\n      return;\r\n    }\r\n    if (isCalculated) {\r\n      setLeft(num + \"\");\r\n      setRight(\"\");\r\n      setOperator(\"\");\r\n      setIC(false);\r\n    } else {\r\n      if (currOperator === \"\") {\r\n        if (left === \"0\") {\r\n          setLeft(num + \"\");\r\n        } else {\r\n          setLeft(left + \"\" + num);\r\n        }\r\n      } else {\r\n        if (right === \"0\") {\r\n          setRight(num + \"\");\r\n        } else {\r\n          setRight(right + \"\" + num);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  const clear = () => {\r\n    setOperator(\"\");\r\n    setIC(false);\r\n    setLeft(\"0\");\r\n    setRight(\"\");\r\n    setStage(\"\");\r\n  };\r\n  const normalOperation = (type, text) => {\r\n    if (text === undefined) {\r\n      text = type;\r\n    }\r\n    setOperator(type);\r\n    setStage(left + text);\r\n    setRight(\"0\");\r\n    // 如果是刚计算完，就接着上一次的结果来计算；\r\n    // 避免按下一个数的时候清除该结果\r\n    if (isCalculated) {\r\n      setIC(false);\r\n    }\r\n  };\r\n  const add = () => normalOperation(\"+\"),\r\n    sub = () => normalOperation(\"-\"),\r\n    multi = () => normalOperation(\"*\", \"x\"),\r\n    division = () => normalOperation(\"/\", \"÷\");\r\n  const percent = () => {\r\n    if (currOperator === \"\") {\r\n      if (left === \"0\") {\r\n        showAlert(\"0% = 0 !!!\", \"#fff\");\r\n        return;\r\n      }\r\n      setLeft(parseFloat(left) / 100 + \"\");\r\n    } else {\r\n      if (right === \"0\") {\r\n        showAlert(\"0% = 0 !!!\", \"#fff\");\r\n        return;\r\n      }\r\n      setRight(parseFloat(right) / 100 + \"\");\r\n    }\r\n  };\r\n  const nega = () => {\r\n    if (currOperator === \"\") {\r\n      if (left === \"0\") {\r\n        showAlert(\"-0 === +0\", \"#fff\");\r\n        return;\r\n      }\r\n      setLeft(parseFloat(left) > 0 ? \"-\" + left : left.substring(1));\r\n    } else {\r\n      if (right === \"0\") {\r\n        showAlert(\"-0 === +0\", \"#fff\");\r\n        return;\r\n      }\r\n      setRight(parseFloat(right) > 0 ? \"-\" + right : right.substring(1));\r\n    }\r\n  };\r\n  const point = () => {\r\n    if (currOperator === \"\") {\r\n      if (~left.indexOf(\".\")) {\r\n        showAlert(\"已是小数！\", \"#f0f\");\r\n        return;\r\n      }\r\n      setLeft(left + \".\");\r\n    } else {\r\n      if (~right.indexOf(\".\")) {\r\n        showAlert(\"已是小数！\", \"#f0f\");\r\n        return;\r\n      }\r\n      setRight(right + \".\");\r\n    }\r\n  };\r\n  const cent2 = () => {\r\n    if (currOperator === \"\") {\r\n      if (left === \"0\") {\r\n        showAlert(\"0不能为分母\", \"rgb(199, 124, 25)\");\r\n        return;\r\n      }\r\n      setLeft(1/parseFloat(left) + \"\");\r\n    } else {\r\n      if (right === \"0\") {\r\n        showAlert(\"0不能为分母\", \"rgb(199, 124, 25)\");\r\n        return;\r\n      }\r\n      setRight(1/parseFloat(right) + \"\");\r\n    }\r\n  }\r\n  const clearOne = () => {\r\n    if (currOperator === \"\") {\r\n      if (left === \"0\") {\r\n        return;\r\n      }\r\n      if(left.length === 1) {\r\n        setLeft(\"0\");\r\n      } else {\r\n        setLeft(left.slice(0, left.length-1));\r\n      }\r\n    } else {\r\n      if (right === \"0\" || right === \"\") {\r\n        return;\r\n      }\r\n      if(right.length === 1) {\r\n        setRight(\"0\");\r\n      } else {\r\n        setRight(right.slice(0, right.length-1));\r\n      }\r\n    }\r\n  }\r\n  const square = () => {\r\n    if (currOperator === \"\") {\r\n      setLeft(parseFloat(left)*parseFloat(left) + \"\");\r\n    } else {\r\n      setRight(parseFloat(right)*parseFloat(right) + \"\");\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  const equal = () => {\r\n    let res;\r\n    switch (currOperator) {\r\n      case \"+\":\r\n        res = parseFloat(left) + parseFloat(right);\r\n        break;\r\n      case \"-\":\r\n        res = parseFloat(left) - parseFloat(right);\r\n        break;\r\n      case \"*\":\r\n        res = parseFloat(left) * parseFloat(right);\r\n        break;\r\n      case \"/\":\r\n        if (right === \"0\") {\r\n          showAlert(\"除数不能为零！\", \"rgb(250, 3, 5)\");\r\n          return;\r\n        }\r\n        res = parseInt(left) / parseInt(right);\r\n        break;\r\n      default:\r\n        showAlert(\"未定义的运算符！\", \"#ab2632\");\r\n        return;\r\n    }\r\n    setOperator(\"\");\r\n    setStage(stage + right + \"=\");\r\n    setLeft(res + '');\r\n    setRight(\"0\");\r\n    setIC(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div ref={alertBox} id=\"alert-box\">\r\n        <Alert info={alertStyle[0]} color={alertStyle[1]} />\r\n      </div>\r\n      <div className=\"calculator-container\" id=\"calculator-container\">\r\n        <div className=\"calculator-inner-box\">\r\n          <CalculatorInner\r\n            clear={clear}\r\n            input_num={input_num}\r\n            stage={stage}\r\n            result={currOperator === \"\" ? left : right}\r\n            funcs = {{\r\n              add, sub, division, multi, percent, equal, nega, point, cent2, clearOne, square\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default Calculator;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport Calculator from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <Calculator />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}